# 发送请求
### http请求方式
```
POST
```
### 数据接收地址

{{$parent.api.url}}
### 数据批量接收地址

{{$parent.api.batchUrl}}

# 请求示例
### 导入用户数据请求示例
```
{
    "type": "user",
    "properties": {
        "mobile": "18366668888",
        "email": "zhangsan@qdum.com",
        "name": "张三"
        ...
    }
}
```

### 删除用户数据请求示例
```
{
    "type": "user_delete",
    "properties": {
        "mobile": "18366668888",
        "email": "zhangsan@qdum.com"
    }
}
```


### 导入事件数据请求示例
```
{
    "type": "event",
    "event": "order_detail",
    "properties": {
        "mobile": "18366668888",
        "email": "zhangsan@qdum.com",
        "event_id": "2018071216423310001",
        "create_time": "2018-07-12 16:42:33",
        "shop_name": "<门店名称>",
        "amount": "<订单金额>",
        "item_num": "<商品数量>",
        ...
    }
}
```

### 批量导入用户数据请求示例
```
{
    "type": "user_batch",
    "properties": [{
        "mobile": "18366668886",
        "email": "zhangyi@qdum.com",
        "name": "张一"
        ...
    },{
        "mobile": "18366668887",
        "email": "zhanger@qdum.com",
        "name": "张二"
        ...
    },{
        "mobile": "18366668888",
        "email": "zhangsan@qdum.com",
        "name": "张三"
        ...
    }]
}
```

### 批量导入事件数据请求示例
```
{
    "type": "event_batch",
    "event": "order_detail",
    "properties": [{
        "mobile": "18366668886",
        "email": "zhangyi@qdum.com",
        "event_id": "2018071216423310001",
        "create_time": "2018-07-12 16:42:33",
        "shop_name": "<门店名称>",
        "amount": <订单金额>,
        "item_num": <商品数量>,
        ...
    },{
        "mobile": "18366668887",
        "email": "zhanger@qdum.com",
        "event_id": "2018071216423310002",
        "create_time": "2018-07-12 16:42:33",
        "shop_name": "<门店名称>",
        "amount": <订单金额>,
        "item_num": <商品数量>,
        ...
    },{
        "mobile": "18366668888",
        "email": "zhangsan@qdum.com",
        "event_id": "2018071216423310003",
        "create_time": "2018-07-12 16:42:33",
        "shop_name": "<门店名称>",
        "amount": <订单金额>,
        "item_num": <商品数量>,
        ...
    }]
}
```
# 参数说明
### 导入用户数据参数说明

参数 | 是否必须 | 说明
:--- | :------: |:-
type | 是 |导入用户数据时该值为user, 标识这是一条用户数据导入请求
properties | 是 | 用户属性, 取值来自 "用户属性"

### 删除用户数据参数说明
参数 | 是否必须 | 说明
:--- | :------: |:-
type | 是 |删除用户数据时该值为user_delete, 标识这是一条用户数据删除请求
properties | 是 | 取值来自 "带主键标识的用户属性"

### 导入事件数据参数说明
参数 | 是否必须 | 说明
:--- | :-: |:-
type | 是 | 导入事件数据时该值为event, 标识这是一条事件数据导入请求
event| 是 | 事件名, 标识该次请求是为哪个事件更新数据
properties | 是 | 事件属性, 取值来自 "事件属性" 和 "带主键标识的用户属性"
event_id | 是 | 主键, 事件的唯一标识,例如: 订单ID
create_time | 是 | 事件发生时间, 例如: 下单时间

### 批量导入用户数据参数说明
参数 | 是否必须 | 说明
:--- | :------: |:-
type | 是 |批量导入用户数据时该值为user_batch, 标识这是一条批量导入用户数据的请求
properties | 是 | 用户属性列表, 每一项代表一条用户数据, 每一项的取值来自 "用户属性"

### 批量导入事件数据参数说明
参数 | 是否必须 | 说明
:--- | :------: |:-
type | 是 |批量导入事件数据时该值为event_batch, 标识这是一条用户数据导入请求
properties | 是 | 事件属性列表, 每一项代表一条事件数据, 每一项的取值来自 "事件属性" 和 "带主键标识的用户属性"

### 特殊参数说明
```
properties中都需要"带主键标识的用户属性"且至少一个有值.

特别说明:
    1. "带主键标识的用户属性": 在"数据中心-元数据-用户属性"中可以将某些属性设置为主键标识, 例如将手机号和邮箱设为主键标识, 在导入数据时会根据这两个属性查询用户并更新数据.
    2. 事件数据中需要两个额外的属性,"event_id"和"create_time",event_id为该事件数据的唯一标识,create_time为该事件发生的时间.

```

# 返回结果

### 正确时的返回JSON包如下
```
{"errcode":0,"errmsg":"请求成功"}
```
### 错误时的返回JSON包如下
```
{"errcode":10001,"errmsg":"json数据格式化失败"}
```
### 返回码说明

返回码 | 说明
:---|:---
0 | 请求成功
10000 | 系统错误
10001 | json数据格式化失败
10002 | type取值不合法
10003 | 缺少secret参数
10004 | 属性列表为空
20000 | 身份验证失败
20001 | 缺少主键标识的用户属性
20002 | 至少需要一个主键标识的用户属性存在值
20003 | 数据校验失败


### 备注
```
该结果只是标识请求结果, 数据导入结果请查看系统中相关数据源的导入详情
```
